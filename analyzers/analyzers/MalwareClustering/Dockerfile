FROM python:3-slim

WORKDIR /worker
COPY . MalwareClustering
# Install build tools and dependencies for C extensions
RUN apt update && apt install -y --no-install-recommends \
build-essential \
python3-dev \
libfuzzy-dev \
python3-magic \
libimage-exiftool-perl && \
rm -rf /var/lib/apt/lists/*
RUN pip3 install --no-cache-dir -r MalwareClustering/requirements.txt
ENTRYPOINT ["python", "MalwareClustering/malwareclustering.py"]
